---
import { PUBLIC_STRAPI_URL } from '../lib/conections';

// NOTA: Mantuve la URL tal cual me la pasaste (ojo con 'destactados' vs 'destacados')
const response = await fetch(`${PUBLIC_STRAPI_URL}/destactados?populate[destacados][populate]=image`);
const { data } = await response.json();

const info = data?.[0];
const productos = info.destacados || [];
---

<section class="w-full">
    <h2 class="text-2xl mb-4">
        {info.titulo || "Productos Destacados"}
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        {productos.map((item: any) => (
            /* CARD: Solo borde para delimitar */
                <article class="border border-gray-300">
                    <a href={`/producto/${item.slug}`} class="block">

                        <div class="p-2">
                            <img
                                    src={item.image?.url || '/placeholder.png'}
                                    alt={item.nombre}
                                    class="w-full h-auto"
                            />
                        </div>

                        <div class="p-2">
                            <h3>{item.nombre}</h3>
                            <p>
                                $ {Number(item.precio).toLocaleString('es-CL')}
                            </p>
                        </div>
                    </a>
                </article>
        ))}
    </div>
</section>